2025-10-04 18:58:29.049 +05:30 [INF] User profile is available. Using 'C:\Users\2436730\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-04 18:58:29.473 +05:30 [INF] Now listening on: http://localhost:5145
2025-10-04 18:58:30.148 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-04 18:58:30.150 +05:30 [INF] Hosting environment: Development
2025-10-04 18:58:30.154 +05:30 [INF] Content root path: C:\Users\2436730\Downloads\Training\PromoPilot_upto_content_negotiation\PromoPilot.API
2025-10-04 18:58:44.102 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5145/swagger/index.html - null null
2025-10-04 18:58:44.686 +05:30 [INF] HTTP GET /swagger/index.html responded 200 in 132.2607 ms
2025-10-04 18:58:44.721 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5145/swagger/index.html - 200 null text/html;charset=utf-8 620.1248ms
2025-10-04 18:58:45.412 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5145/_vs/browserLink - null null
2025-10-04 18:58:45.424 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5145/_framework/aspnetcore-browser-refresh.js - null null
2025-10-04 18:58:45.449 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5145/_framework/aspnetcore-browser-refresh.js - 200 16513 application/javascript; charset=utf-8 23.5235ms
2025-10-04 18:58:45.503 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5145/_vs/browserLink - 200 null text/javascript; charset=UTF-8 94.0011ms
2025-10-04 18:58:46.799 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5145/swagger/v1/swagger.json - null null
2025-10-04 18:58:46.836 +05:30 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 28.4116 ms
2025-10-04 18:58:46.845 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5145/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 45.9528ms
2025-10-04 19:03:58.135 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5145/api/Auth/Login - application/json 181
2025-10-04 19:03:58.166 +05:30 [WRN] Failed to determine the https port for redirect.
2025-10-04 19:03:58.172 +05:30 [INF] No CORS policy found for the specified request.
2025-10-04 19:03:58.251 +05:30 [INF] Processing request: /api/Auth/Login
2025-10-04 19:03:58.267 +05:30 [INF] Request:
Protocol: HTTP/1.1
Method: POST
Scheme: http
PathBase: 
Path: /api/Auth/Login
Accept: */*
Connection: keep-alive
Host: localhost:5145
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36
Accept-Encoding: gzip, deflate, br, zstd
Accept-Language: en-US,en;q=0.9
Content-Type: application/json
Origin: [Redacted]
Referer: [Redacted]
Content-Length: 181
sec-ch-ua-platform: [Redacted]
sec-ch-ua: [Redacted]
sec-ch-ua-mobile: [Redacted]
Sec-Fetch-Site: [Redacted]
Sec-Fetch-Mode: [Redacted]
Sec-Fetch-Dest: [Redacted]
2025-10-04 19:04:00.270 +05:30 [INF] Executing endpoint 'AuthController.Login (PromoPilot.API)'
2025-10-04 19:04:00.346 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(PromoPilot.Application.DTOs.LoginRequest) on controller AuthController (PromoPilot.API).
2025-10-04 19:04:02.091 +05:30 [INF] RequestBody: {
  "email": "mariya@gmail.com",
  "password": "0xB02B90D6DF9FE0FA15558D97013119EDC42E1DED443E120FC030C23C2D555BC1C1783AC2FB56C1160FE954B0E62C6B6E1CB332C5738D9A658056C56E3A53F96E"
}
2025-10-04 19:04:02.125 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-04 19:04:02.163 +05:30 [INF] Response:
StatusCode: 400
Content-Type: application/problem+json; charset=utf-8
2025-10-04 19:04:02.174 +05:30 [INF] Executed action AuthController.Login (PromoPilot.API) in 1803.5831ms
2025-10-04 19:04:02.182 +05:30 [INF] Executed endpoint 'AuthController.Login (PromoPilot.API)'
2025-10-04 19:04:02.187 +05:30 [INF] ResponseBody: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"Password":["Password must be at least 6 characters.","Password must contain at least one uppercase letter, one lowercase letter, one digit, and one special character."]},"traceId":"00-be414729a60ee14d07f1f10af0428d48-748816690f40d9cb-00"}
2025-10-04 19:04:02.199 +05:30 [INF] Duration: 3933.0938ms
2025-10-04 19:04:02.207 +05:30 [INF] Request processed successfully.
2025-10-04 19:04:02.216 +05:30 [INF] HTTP POST /api/Auth/Login responded 400 in 4058.6169 ms
2025-10-04 19:04:02.234 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5145/api/Auth/Login - 400 null application/problem+json; charset=utf-8 4099.0066ms
2025-10-04 19:04:50.918 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5145/api/Auth/Register - application/json 102
2025-10-04 19:04:50.957 +05:30 [INF] No CORS policy found for the specified request.
2025-10-04 19:04:50.971 +05:30 [INF] Processing request: /api/Auth/Register
2025-10-04 19:04:50.979 +05:30 [INF] Request:
Protocol: HTTP/1.1
Method: POST
Scheme: http
PathBase: 
Path: /api/Auth/Register
Accept: */*
Connection: keep-alive
Host: localhost:5145
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36
Accept-Encoding: gzip, deflate, br, zstd
Accept-Language: en-US,en;q=0.9
Content-Type: application/json
Origin: [Redacted]
Referer: [Redacted]
Content-Length: 102
sec-ch-ua-platform: [Redacted]
sec-ch-ua: [Redacted]
sec-ch-ua-mobile: [Redacted]
Sec-Fetch-Site: [Redacted]
Sec-Fetch-Mode: [Redacted]
Sec-Fetch-Dest: [Redacted]
2025-10-04 19:04:50.989 +05:30 [INF] Executing endpoint 'AuthController.Register (PromoPilot.API)'
2025-10-04 19:04:51.087 +05:30 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(PromoPilot.Application.DTOs.RegisterRequest) on controller AuthController (PromoPilot.API).
2025-10-04 19:04:51.133 +05:30 [INF] RequestBody: {
  "username": "mar",
  "email": "mar@example.com",
  "password": "Mar@1234",
  "role": "Marketing"
}
2025-10-04 19:04:56.231 +05:30 [INF] Executed DbCommand (390ms) [Parameters=[@__dto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__dto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-04 19:04:56.629 +05:30 [INF] Executed DbCommand (32ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (Size = 8000) (DbType = Binary), @p5='?' (Size = 8000) (DbType = Binary), @p6='?' (Size = 4000), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Email], [FailedLoginAttempts], [LockoutEndTime], [PasswordHash], [PasswordSalt], [Role], [Username])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-10-04 19:04:57.021 +05:30 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Id], [Expires], [IsRevoked], [Token], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-10-04 19:04:57.052 +05:30 [INF] Executing OkObjectResult, writing value of type 'PromoPilot.Application.DTOs.AuthResponse'.
2025-10-04 19:04:57.086 +05:30 [INF] Response:
StatusCode: 200
Content-Type: application/json; charset=utf-8
2025-10-04 19:04:57.099 +05:30 [INF] Executed action AuthController.Register (PromoPilot.API) in 5991.2661ms
2025-10-04 19:04:57.111 +05:30 [INF] Executed endpoint 'AuthController.Register (PromoPilot.API)'
2025-10-04 19:04:57.123 +05:30 [INF] ResponseBody: {"message":null,"accessToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiYWI1MDdlLWZiNjItNGI2NS05N2U3LTVkYmNlYzQyNzlkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6Im1hckBleGFtcGxlLmNvbSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6Ik1hcmtldGluZyIsImV4cCI6MTc1OTU4ODQ5NiwiaXNzIjoiUHJvbW9QaWxvdElzc3VlciIsImF1ZCI6IlByb21vUGlsb3RBdWRpZW5jZSJ9.s8ojKjPGJ4RpojotI76xrt6iY7zqa6EVi59-YUa-jb4","refreshToken":"sAAHWeW5SwCdt4EQqj1ZRyeYPE1A6GXEeFphVlN7tm8TBpjk6rDwNTVQF7ixZwimeXFFawJaMmhjNAOTpeOAfA==","accessTokenExpiry":"2025-10-04T14:34:57.0423107Z","refreshTokenExpiry":"2025-10-11T13:34:56.930186Z","role":"Marketing","email":"mar@example.com","username":"mar"}
2025-10-04 19:04:57.133 +05:30 [INF] Duration: 6153.8626ms
2025-10-04 19:04:57.141 +05:30 [INF] Request processed successfully.
2025-10-04 19:04:57.149 +05:30 [INF] HTTP POST /api/Auth/Register responded 200 in 6193.3136 ms
2025-10-04 19:04:57.174 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5145/api/Auth/Register - 200 null application/json; charset=utf-8 6256.1998ms
2025-10-04 19:05:56.900 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5145/api/Auth/Refresh - application/json 561
2025-10-04 19:05:56.934 +05:30 [INF] No CORS policy found for the specified request.
2025-10-04 19:05:56.940 +05:30 [INF] Processing request: /api/Auth/Refresh
2025-10-04 19:05:56.949 +05:30 [INF] Request:
Protocol: HTTP/1.1
Method: POST
Scheme: http
PathBase: 
Path: /api/Auth/Refresh
Accept: */*
Connection: keep-alive
Host: localhost:5145
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36
Accept-Encoding: gzip, deflate, br, zstd
Accept-Language: en-US,en;q=0.9
Authorization: [Redacted]
Content-Type: application/json
Origin: [Redacted]
Referer: [Redacted]
Content-Length: 561
sec-ch-ua-platform: [Redacted]
sec-ch-ua: [Redacted]
sec-ch-ua-mobile: [Redacted]
Sec-Fetch-Site: [Redacted]
Sec-Fetch-Mode: [Redacted]
Sec-Fetch-Dest: [Redacted]
2025-10-04 19:05:57.069 +05:30 [INF] Executing endpoint 'AuthController.Refresh (PromoPilot.API)'
2025-10-04 19:05:57.088 +05:30 [INF] Route matched with {action = "Refresh", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh(PromoPilot.Application.DTOs.RefreshTokenRequest) on controller AuthController (PromoPilot.API).
2025-10-04 19:05:57.108 +05:30 [INF] RequestBody: {
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiYWI1MDdlLWZiNjItNGI2NS05N2U3LTVkYmNlYzQyNzlkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6Im1hckBleGFtcGxlLmNvbSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6Ik1hcmtldGluZyIsImV4cCI6MTc1OTU4ODQ5NiwiaXNzIjoiUHJvbW9QaWxvdElzc3VlciIsImF1ZCI6IlByb21vUGlsb3RBdWRpZW5jZSJ9.s8ojKjPGJ4RpojotI76xrt6iY7zqa6EVi59-YUa-jb4"
}
2025-10-04 19:05:57.418 +05:30 [INF] Executed DbCommand (45ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Expires], [r].[IsRevoked], [r].[Token], [r].[UserId], [u].[Id], [u].[Email], [u].[FailedLoginAttempts], [u].[LockoutEndTime], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [RefreshToken] AS [r]
INNER JOIN [Users] AS [u] ON [r].[UserId] = [u].[Id]
WHERE [r].[Token] = @__refreshToken_0 AND [r].[IsRevoked] = CAST(0 AS bit)
2025-10-04 19:05:57.996 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-04 19:05:58.012 +05:30 [INF] Response:
StatusCode: 401
Content-Type: application/json; charset=utf-8
2025-10-04 19:05:58.017 +05:30 [INF] Executed action AuthController.Refresh (PromoPilot.API) in 913.6427ms
2025-10-04 19:05:58.026 +05:30 [INF] Executed endpoint 'AuthController.Refresh (PromoPilot.API)'
2025-10-04 19:05:58.035 +05:30 [INF] ResponseBody: {"message":"Refresh token is invalid or revoked."}
2025-10-04 19:05:58.043 +05:30 [INF] Duration: 1095.4812ms
2025-10-04 19:05:58.052 +05:30 [INF] Request processed successfully.
2025-10-04 19:05:58.062 +05:30 [INF] HTTP POST /api/Auth/Refresh responded 401 in 1128.6356 ms
2025-10-04 19:05:58.080 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5145/api/Auth/Refresh - 401 null application/json; charset=utf-8 1180.0662ms
2025-10-04 19:06:09.606 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5145/api/Auth/Refresh - application/json 112
2025-10-04 19:06:09.620 +05:30 [INF] No CORS policy found for the specified request.
2025-10-04 19:06:09.628 +05:30 [INF] Processing request: /api/Auth/Refresh
2025-10-04 19:06:09.634 +05:30 [INF] Request:
Protocol: HTTP/1.1
Method: POST
Scheme: http
PathBase: 
Path: /api/Auth/Refresh
Accept: */*
Connection: keep-alive
Host: localhost:5145
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36
Accept-Encoding: gzip, deflate, br, zstd
Accept-Language: en-US,en;q=0.9
Authorization: [Redacted]
Content-Type: application/json
Origin: [Redacted]
Referer: [Redacted]
Content-Length: 112
sec-ch-ua-platform: [Redacted]
sec-ch-ua: [Redacted]
sec-ch-ua-mobile: [Redacted]
Sec-Fetch-Site: [Redacted]
Sec-Fetch-Mode: [Redacted]
Sec-Fetch-Dest: [Redacted]
2025-10-04 19:06:09.647 +05:30 [INF] Executing endpoint 'AuthController.Refresh (PromoPilot.API)'
2025-10-04 19:06:09.655 +05:30 [INF] Route matched with {action = "Refresh", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh(PromoPilot.Application.DTOs.RefreshTokenRequest) on controller AuthController (PromoPilot.API).
2025-10-04 19:06:09.671 +05:30 [INF] RequestBody: {
  "refreshToken": "sAAHWeW5SwCdt4EQqj1ZRyeYPE1A6GXEeFphVlN7tm8TBpjk6rDwNTVQF7ixZwimeXFFawJaMmhjNAOTpeOAfA=="
}
2025-10-04 19:06:09.827 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Expires], [r].[IsRevoked], [r].[Token], [r].[UserId], [u].[Id], [u].[Email], [u].[FailedLoginAttempts], [u].[LockoutEndTime], [u].[PasswordHash], [u].[PasswordSalt], [u].[Role], [u].[Username]
FROM [RefreshToken] AS [r]
INNER JOIN [Users] AS [u] ON [r].[UserId] = [u].[Id]
WHERE [r].[Token] = @__refreshToken_0 AND [r].[IsRevoked] = CAST(0 AS bit)
2025-10-04 19:06:09.897 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [RefreshToken] SET [IsRevoked] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-10-04 19:06:09.919 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (Size = 4000), @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshToken] ([Id], [Expires], [IsRevoked], [Token], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-10-04 19:06:09.933 +05:30 [INF] Executing OkObjectResult, writing value of type 'PromoPilot.Application.DTOs.AuthResponse'.
2025-10-04 19:06:09.938 +05:30 [INF] Response:
StatusCode: 200
Content-Type: application/json; charset=utf-8
2025-10-04 19:06:09.942 +05:30 [INF] Executed action AuthController.Refresh (PromoPilot.API) in 271.5649ms
2025-10-04 19:06:09.953 +05:30 [INF] Executed endpoint 'AuthController.Refresh (PromoPilot.API)'
2025-10-04 19:06:09.961 +05:30 [INF] ResponseBody: {"message":null,"accessToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjZiYWI1MDdlLWZiNjItNGI2NS05N2U3LTVkYmNlYzQyNzlkNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6Im1hckBleGFtcGxlLmNvbSIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvcm9sZSI6Ik1hcmtldGluZyIsImV4cCI6MTc1OTU4ODU2OSwiaXNzIjoiUHJvbW9QaWxvdElzc3VlciIsImF1ZCI6IlByb21vUGlsb3RBdWRpZW5jZSJ9.HJRTCikO7-IYwBbRHBEE77pC2T2uYtQh5mG2kUPVn_w","refreshToken":"Kq31gZqrKpNjJSqBxVf2BDjjCXc46q5ZXWESexqgYgq2ceMB8bpVeDmZkac3SETUYWXZeu0ysPoSe2FWVNlh1w==","accessTokenExpiry":"2025-10-04T14:36:09.9329598Z","refreshTokenExpiry":"2025-10-11T13:36:09.9131992Z","role":"Marketing","email":"mar@example.com","username":"mar"}
2025-10-04 19:06:09.972 +05:30 [INF] Duration: 338.3261ms
2025-10-04 19:06:09.980 +05:30 [INF] Request processed successfully.
2025-10-04 19:06:09.987 +05:30 [INF] HTTP POST /api/Auth/Refresh responded 200 in 367.4498 ms
2025-10-04 19:06:10.007 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5145/api/Auth/Refresh - 200 null application/json; charset=utf-8 401.046ms
